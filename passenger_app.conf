# Passenger Configuration for Plesk
# This tells Passenger how to run the Node.js application

# Enable Passenger
passenger_enabled on;

# Set the Node.js version (adjust if needed)
passenger_nodejs /opt/plesk/node/22/bin/node;

# Set the startup file
passenger_app_root /var/www/vhosts/7mountainsmedia.com/ask.7mountainsmedia.com;
passenger_startup_file server.js;

# Environment variables
passenger_env_var FLASK_ENV production;
passenger_env_var NODE_ENV production;
passenger_env_var PORT 3000;
passenger_env_var FLASK_PORT 5001;

# Performance tuning
passenger_min_instances 1;
passenger_max_instances 3;
passenger_pool_idle_time 300;

# Logging
passenger_log_file /var/www/vhosts/7mountainsmedia.com/ask.7mountainsmedia.com/logs/passenger.log;
passenger_log_level info;
