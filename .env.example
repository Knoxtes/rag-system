# RAG System Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# REQUIRED FOR PRODUCTION
# ============================================================================

# Google OAuth Credentials (REQUIRED)
# Get these from Google Cloud Console > APIs & Services > Credentials
GOOGLE_CLIENT_ID=your_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_client_secret_here

# JWT Secret Key (REQUIRED for production)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
JWT_SECRET_KEY=your_secure_random_jwt_secret_key_here

# Flask Secret Key (REQUIRED for production)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
FLASK_SECRET_KEY=your_secure_random_flask_secret_key_here

# Google Cloud Configuration (REQUIRED for AI features)
# Either provide API key OR Project ID (for Vertex AI)
GOOGLE_API_KEY=your_google_api_key_here
PROJECT_ID=your_google_cloud_project_id

# ============================================================================
# SECURITY SETTINGS (Recommended for Production)
# ============================================================================

# Allowed Email Domains (comma-separated)
# Leave empty to allow all authenticated users
# Example: ALLOWED_DOMAINS=yourdomain.com,partner.com
ALLOWED_DOMAINS=

# CORS Origins (comma-separated)
# Restrict to your frontend domain in production
# Example: CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=http://localhost:3000

# OAuth Redirect URI
# Must match what's configured in Google Cloud Console
OAUTH_REDIRECT_URI=http://localhost:3000/auth/callback

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Environment Mode
# Options: development, production
FLASK_ENV=development

# Application Port and Host
PORT=5000
HOST=0.0.0.0

# Token Configuration
# Access token expiry in hours (default: 168 = 7 days)
TOKEN_EXPIRY_HOURS=168

# Refresh token expiry in days (default: 30 days)
REFRESH_TOKEN_EXPIRY_DAYS=30

# ============================================================================
# GOOGLE CLOUD AI SETTINGS
# ============================================================================

# Use Vertex AI instead of consumer API
# Set to False to use GOOGLE_API_KEY instead
USE_VERTEX_AI=True

# Use Vertex AI for embeddings (recommended for production)
USE_VERTEX_EMBEDDINGS=True

# Gemini Model Version
# Options: gemini-2.5-flash, gemini-2.0-flash-exp, gemini-1.5-flash, gemini-1.5-pro
GEMINI_MODEL=gemini-2.5-flash

# Google Cloud Location
LOCATION=us-central1

# ============================================================================
# DOCUMENT AI SETTINGS (Optional)
# ============================================================================

# Enable OCR for image processing
OCR_ENABLED=True

# OCR Backend
# Options: documentai, easyocr, tesseract, google_vision
OCR_BACKEND=documentai

# Document AI Configuration (when using documentai backend)
DOCUMENTAI_PROJECT_ID=your_project_id
DOCUMENTAI_LOCATION=us
DOCUMENTAI_PROCESSOR_ID=

# ============================================================================
# DATABASE & STORAGE
# ============================================================================

# ChromaDB Persistence Directory
CHROMA_PERSIST_DIR=./chroma_db

# Collection Name (default collection)
COLLECTION_NAME=google_drive_docs

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Embedding Settings
EMBEDDING_MODEL=BAAI/bge-small-en-v1.5
EMBEDDING_BATCH_SIZE=64

# Retrieval Settings
TOP_K_RESULTS=10
INITIAL_RETRIEVAL_COUNT=100

# Context Window Sizes (in characters)
MAX_CONTEXT_CHARACTERS=8000
SYNTHESIS_CONTEXT_WINDOW=15000

# Query Caching
ENABLE_QUERY_CACHE=True
CACHE_TTL_SECONDS=900
CACHE_MAX_SIZE=2000

# ============================================================================
# LOGGING & MONITORING
# ============================================================================

# Log Level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# RATE LIMITING
# ============================================================================

# Default rate limits (can be overridden per endpoint)
# Format: "X per Y" where Y is: second, minute, hour, or day
DEFAULT_RATE_LIMIT_DAY=200 per day
DEFAULT_RATE_LIMIT_HOUR=50 per hour

# ============================================================================
# ADVANCED SETTINGS (Usually don't need to change)
# ============================================================================

# Chunking Settings
CHUNK_SIZE=400
CHUNK_OVERLAP=100

# Hybrid Search Weights
BM25_WEIGHT=0.3
DENSE_WEIGHT=0.7

# Agent Settings
MAX_AGENT_ITERATIONS=8
AGENT_TEMPERATURE=0.3

# Multi-Collection Settings
ENABLE_AI_ROUTING=True
AI_ROUTING_CONFIDENCE_THRESHOLD=0.5

# Text Quality Filtering
TEXT_QUALITY_FILTER_ENABLED=True
QUALITY_MIN_READABLE_RATIO=0.6
QUALITY_MIN_OVERALL_SCORE=0.3

# ============================================================================
# NOTES
# ============================================================================
# 
# 1. Never commit your .env file to version control!
# 2. Generate strong random keys for JWT_SECRET_KEY and FLASK_SECRET_KEY
# 3. Restrict CORS_ORIGINS and ALLOWED_DOMAINS in production
# 4. Set FLASK_ENV=production when deploying
# 5. Consider using a secrets manager for sensitive values in production
#
